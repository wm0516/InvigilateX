{% extends "admin/adminBase.html" %}
{% block title %}Admin Manage Timetable{% endblock %}

{% block content %}
<div class="menu-section">
    <h2>Manage Timetable</h2>

    <form style="max-height: 500px; overflow-y: auto;">
        {% if not files %}
            {% if not authorized %}
                <a href="{{ url_for('authorize') }}" class="btn btn-primary">Authorize Google Drive</a>
            {% else %}
                <a href="{{ url_for('fetch_drive_files') }}" class="btn btn-success">Load Drive Files</a>
            {% endif %}
        {% endif %}

        <!-- Assuming you are using Jinja templating -->
        <h1>Filtered Files</h1>
        <table>
            <thead>
                <tr>
                    <th>File Name</th>
                    <th>Link</th>
                </tr>
            </thead>
            <tbody>
                {% for file in files %}
                    <tr>
                        <td>{{ file['name'] }}</td>
                        <td><a href="{{ file['webViewLink'] }}" target="_blank">View</a></td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>

        <br>
        {% if get_flashed_messages(with_categories=true) %}
            {% for category, message in get_flashed_messages(with_categories=true) %}
                <div class="alert alert-{{ category }}">
                    <strong>{{ category.capitalize() }}:</strong> {{ message }}
                </div>
            {% endfor %}
        {% endif %}
        <br>

    </form>

</div>

{% endblock %}

