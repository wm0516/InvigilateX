<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Attendance Record</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/auth.css') }}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>

<body>
    <form method="POST" style="width: 60%; margin: auto;">
        <h1 class="user-info" id="current-datetime"></1>
        <h1>Attendance Check In/Out</h1>

        <div class="form-container">
            <div class="input-container" style="width: 60%; align-items: center;">
                <h3>Scan Card</h3>
                <input type="text" name="cardNumber" value="{{ cardNumber_text }}" required style="width: 50%;">
            </div>
        </div>

        <div class="user-table-container">
            <table class="user-data-table">
                <thead>
                    <tr>
                        <th>Exam Details</th>
                        <th>Clock In</th>
                        <th>Clock Out</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>
                            <div class="info-grid">
                                <div>Course Name</div><div><strong>: {{ confirm.report.exam.course.courseName }}</strong></div>
                                <div>Course Code/Section</div><div><strong>: {{ confirm.report.exam.course.courseCodeSectionIntake }}</strong></div>
                                <div>Number of Students</div><div><strong>: {{ confirm.report.exam.course.courseStudent }}</strong></div>
                                <div>Exam Date</div><div><strong>: {{ confirm.report.exam.examStartTime.strftime("%d/%b/%Y") }} - {{ confirm.report.exam.examEndTime.strftime("%d/%b/%Y") }}</strong></div>
                                <div>Exam Day</div><div><strong>: {{ confirm.report.exam.examStartTime.strftime("%A") }} - {{ confirm.report.exam.examEndTime.strftime("%A") }}</strong></div>
                                <div>Exam Time</div><div><strong>: {{ confirm.report.exam.examStartTime.strftime("%H:%M") }} - {{ confirm.report.exam.examEndTime.strftime("%H:%M") }}</strong></div>
                                <div>Exam Period</div><div><strong>: {{ (confirm.report.exam.examEndTime - confirm.report.exam.examStartTime).seconds // 3600 }}h {{ ((confirm.report.exam.examEndTime - confirm.report.exam.examStartTime).seconds % 3600) // 60 }}m</strong></div>
                                <div>Exam Venue</div><div><strong>: {{ confirm.report.exam.examVenue }}</strong></div>
                            </div>
                        </td>
                        <td>
                            <div class="info-grid">
                                <div>Clock In</div><div><strong>: {{ confirm.checkIn }}</strong></div>
                            </div>
                        </td>
                        <td>
                            <div class="info-grid">
                                <div>Clock Out</div><div><strong>: {{ confirm.checkOut }}</strong></div>
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </form>

    <script>
        function updateDateTime() {
            const now = new Date();
            const options = { weekday: 'long', day: '2-digit', month: 'short', year: 'numeric', hour: '2-digit',  minute: '2-digit',  second: '2-digit', hour12: false };
            const formatted = now.toLocaleString('en-GB', options).replace(',', ':');
            document.getElementById("current-datetime").textContent = formatted;
        }

        // Initial run and update every second
        updateDateTime();
        setInterval(updateDateTime, 1000);
    </script>
</body>
</html>
