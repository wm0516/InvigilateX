{% extends "lecturer/lecturerBase.html" %}
{% block title %}Lecturer Timetable{% endblock %}

{% block content %}
<div class="menu-section">
    <h2>My Teaching Timetable</h2>

    <div class="timetable-container">
        <!-- Header Row -->
        <div class="timetable-row timetable-header">
            <div class="timetable-time-label">Time / Day</div>
            {% for day in ["MON", "TUE", "WED", "THU", "FRI"] %}
                <div class="timetable-day-label">{{ day }}</div>
            {% endfor %}
        </div>

        <!-- Time Rows -->
        {% for hour in range(7, 24) %}
        <div class="timetable-row">
            <!-- Left-side Time -->
            <div class="timetable-time-label">{{ "%02d:00"|format(hour) }}</div>

            <!-- Day Cells -->
            {% for day in ["MON", "TUE", "WED", "THU", "FRI"] %}
                <div class="timetable-cell">
                    {% for row in timetable_rows if row.classDay|upper == day and (row.classTime.split('-')[0].split(':')[0]|int) == hour %}
                        {% set start_hour = row.classTime.split('-')[0].split(':')[0]|int %}
                        {% set end_hour = row.classTime.split('-')[1].split(':')[0]|int %}
                        {% set duration = end_hour - start_hour %}
                        <div class="class-block" style="--duration: {{ duration }}">
                            <strong>{{ row.courseName }}</strong><br>
                            [{{ row.classType }}]<br>
                            <i>{{ row.classRoom }}</i> | <span>{{ row.classTime }}</span>
                            <hr>
                            <div class="course-details">
                                {% for i in range(row.courseIntakes|length) %}
                                    <small>{{ row.courseIntakes[i] }} | {{ row.courseCodes[i] }} | {{ row.courseSections[i] }}</small><br>
                                {% endfor %}
                            </div>
                        </div>
                    {% endfor %}
                </div>
            {% endfor %}
        </div>
        {% endfor %}
    </div>
</div>
{% endblock %}
